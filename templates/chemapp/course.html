{% extends 'chemapp/base.html' %}

{% block title_block %}
    {{ course.name }}
{% endblock %}

{% block body_block %}
<div class="container mt-5 ">
<div>
    <h2> {{ course.name }} </h2>
    <p> Code: {{ course.code }} </p>
    <p> Degree: {{ course.degree }} </p>
    <p> Credits: {{ course.creditsWorth }} </p>
    <p> Shorthand: {{ course.shortHand }} </p>
    <p> Level: {{ course.level }} </p>
    <p> Academic Year Taught: {{ course.academicYearTaught }} </p>
    <p> Semester: {{ course.semester }} </p>
    <p> Minimum Pass Grade: {{ course.minimumPassGrade }} </p>
    <p> Minimum Requirements For Credit: {{ course.minimumRequirementsForCredit }} </p>
    <p> Description: {{ course.description }} </p>
    <p> Comments: {{ course.comments }} </p>
    <p> Number of Students: {{ course.numberOfStudents }} </p>

    <h2> Assessments and Components</h2>
        {% if not assessments %}
           <p> No assessments have been yet set for this course! </p>
            <!-- Add Assessment Button -->
            <div class="d-grid gap-2 d-md-flex justify-content-md-start">
                <a class="btn btn-danger mt-3" href="{% url 'chemapp:add_assessments' course_name_slug=course_name_slug %}"><i class="pe-1 bi bi-file-earmark-arrow-up"></i>Add Assessments</a>
            <!-- Upload Assessments Button -->
            </div>
            <div class="d-grid gap-2 d-md-flex justify-content-md-start">
    	        <a class="btn btn-danger mt-3" href="{% url 'chemapp:upload_assessment_csv'  course_code=course.code %}"><i class="pe-1 bi bi-file-earmark-arrow-up"></i>Upload CSV File to add Assessments</a>
  	        </div>
            <br>
        {% else %}
            {% for assessment,components in assessments.items %}
                <h4> {{ assessment.assessmentName }} </h4>
                <p> Weight: {{ assessment.weight }} </p>
                <p> Total Marks: {{ assessment.totalMarks }} </p>
                <p> Number of Components Needed: {{ assessment.componentNumberNeeded }} </p>
                <p> Due Date and Time: {{ assessment.dueDate }} </p>

                <!-- Add Assessment Components Button -->
                <div class="d-grid gap-2 d-md-flex justify-content-md-start">
                    <a class="btn btn-danger mt-3" href="{% url 'chemapp:add_assessmentComponents' course_name_slug=course_name_slug assessment_name_slug=assessment.slug %}"><i class="pe-1 bi bi-file-earmark-arrow-up"></i>Add Components</a>
                </div>
                <!-- Upload Button -->
                <div class="d-grid gap-2 d-md-flex justify-content-md-start">
    				<a class="btn btn-danger mt-3" href="{% url 'chemapp:upload_assessment_comp_csv' course_code=course.code  assessment_name=assessment.assessmentName %}"><i class="pe-1 bi bi-file-earmark-arrow-up"></i>Upload CSV File to add {{assessment.assessmentName}} components</a>
  				</div>
                <!-- Edit Assessment Button -->
                <div class="d-grid gap-2 d-md-flex justify-content-md-start">
                    <a class="btn btn-danger mt-3" href="{% url 'chemapp:edit_assessment' course_name_slug=course_name_slug assessment_name_slug=assessment.slug %}"><i class="pe-1 bi bi-file-earmark-arrow-up"></i>Edit Assessment</a>
                </div>
                <!-- Delete Assessment Button -->
                <form id="assessment_delete_form" method="post" action="{% url 'chemapp:delete_assessment' course_name_slug=course_name_slug assessment_name_slug=assessment.slug %}">
                    {% csrf_token %}
                    <button type="submit" class="btn btn-primary mt-5">Delete Assessment</button>
                </form>
                {% for component in components %}
                    <h4> Component: {{ component.description }} </h4>
                    <p> Status: {{ component.status }} </p>
                    <p> Marks: {{ component.marks }} </p>
                    <!-- Edit Assessment Component Button -->
                    <div class="d-grid gap-2 d-md-flex justify-content-md-start">
                        <a class="btn btn-danger mt-3" href="{% url 'chemapp:edit_assessmentComponent' course_name_slug=course_name_slug assessment_name_slug=assessment.slug assessment_component_slug=component.slug %}"><i class="pe-1 bi bi-file-earmark-arrow-up"></i>Edit Assessment Component</a>
                    </div>
                    <!-- Delete Assessment Component Button -->
                    <form id="component_delete_form" method="post" action="{% url 'chemapp:delete_assessmentComponent' course_name_slug=course_name_slug assessment_name_slug=assessment.slug assessment_component_slug=component.slug %}">
                        {% csrf_token %}
                        <button type="submit" class="btn btn-primary mt-5">Delete Component</button>
                    </form>
                    <br>
                {% endfor %}
                <br>
            {% endfor %}
        {% endif %}
        
</div>
    <!-- Edit Course Button -->
    <div class="d-grid gap-2 d-md-flex justify-content-md-start">
        <a class="btn btn-danger mt-3" href="{% url 'chemapp:edit_course' course_name_slug=course_name_slug %}"><i class="pe-1 bi bi-file-earmark-arrow-up"></i>Edit Course</a>
    </div>
    <!-- Delete Course Button -->
    <form id="course_delete_form" method="post" action="{% url 'chemapp:delete_course' course_name_slug=course_name_slug %}">
        {% csrf_token %}
        <button type="submit" class="btn btn-primary mt-5">Delete Course</button>
    </form>

</div>
{% endblock %}
