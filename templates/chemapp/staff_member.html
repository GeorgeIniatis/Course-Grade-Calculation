{% extends 'chemapp/base.html' %}

{% block title_block %}
    Staff Member
{% endblock %}

{% block body_block %}
<div class="container ">
  <table class="table table-hover">
    <thead>
      <tr>
        <th scope="col">Staff ID</th>
        <th scope="col">Title</th>
        <th scope="col">First Name</th>
        <th scope="col">Last Name</th>
        <th scope="col" class="text-end">Actions</th>
      </tr>
    </thead>
  <tbody>
      <tr>
        <th scope="row">{{ staff.staffID }} </th>
        <td>{{staff.title}} </td>
        <td> {{staff.firstName}}</td>
        <td> {{staff.lastName}}</td>
        <td>
          <div class="d-grid gap-2 d-md-flex justify-content-md-end">
              {% if perms.chemapp.change_degree %}
              <a class="btn btn-warning " href="{% url 'chemapp:edit_staff' staffID=staffID %}"><i class="bi bi-pencil-square"></i> Edit</a>
              {% endif %}
              {% if perms.chemapp.delete_degree %}
              <a type="button" class="btn btn-danger" data-bs-toggle="modal" data-bs-target="#A{{ staff.staffID }}"><i class="bi bi-trash"></i></a>
              {% endif %}
          </div>

            <div class="modal fade" id="A{{ staff.staffID }}" tabindex="-1" aria-labelledby="A{{ staff.staffID }}Label" aria-hidden="true">
              <div class="modal-dialog">
                <div class="modal-content">
                  <div class="modal-header">
                    <h5 class="modal-title text-dark" id="A{{ staff.staffID }}Label">Are you sure?</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                  </div>
                  <div class="modal-body text-dark">
                    <h3 class="text-danger bold">WARNING:</h3>
                    <h5 class="text-danger">This will delete this staff member and everything associated. </h5>
                    <h5 class="text-danger">This is permanent and cannot be undone, proceed with caution!<h5>
                  </div>
                  <div class="modal-footer">
                    <button type="button" class="btn btn-success" data-bs-dismiss="modal">Cancel</button>
                    <form id="course_delete_form" method="post" action="{% url 'chemapp:delete_staff' staffID=staff.staffID %}">
                      {% csrf_token %}
                      <button type="submit" class="btn btn-danger">Delete</button>
                    </form>
                  </div>
                </div>
              </div>
            </div>
        </td>
      </tr>
</tbody>
</table>


<div>
    <h2>Comments</h2>
    {% if staff.comments %}
        <p>{{ staff.comments }} </p>
    {% else %}
      <p> None.</p>
    {% endif %}

</div>
<div>
    <!-- Course Section -->
    <h2> Associated Courses </h2>
    {% if courses %}
        {% for course in courses %}
        <p> Course Code: {{ course.code }} </p>
        <p> Course Name: {{ course.name }} </p>
        {% endfor %}
    {% else %}
        <p> No associated courses yet</p>
    {% endif %}
</div>
</div>
{% endblock %}
